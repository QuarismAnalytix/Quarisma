# =============================================================================
# Quarisma Security Library Tests BUILD Configuration
# =============================================================================
# Test targets for Security library using GoogleTest
# Equivalent to Library/Security/Testing/Cxx/CMakeLists.txt
# =============================================================================

load("//bazel:quarisma.bzl", "quarisma_copts", "quarisma_defines", "quarisma_linkopts")

package(default_visibility = ["//visibility:public"])

# =============================================================================
# Security Tests Target
# =============================================================================

cc_test(
    name = "SecurityCxxTests",
    size = "medium",
    srcs = [
        "TestCrypto.cpp",
        "TestInputValidator.cpp",
        "TestSanitizer.cpp",
    ],
    copts = quarisma_copts(),
    defines = quarisma_defines() + [
        "QUARISMA_GOOGLE_TEST",
        "USE_GTEST",
        "_VARIADIC_MAX=10",
        "QUARISMA_HAS_GTEST=1",
    ],
    includes = ["."],
    linkopts = quarisma_linkopts(),
    deps = [
        "//Library/Core:Core",
        "//Library/Core/Testing:quarismaTest_header",
        "//Library/Security:Security",
        "@com_google_googletest//:gtest",
        "@com_google_googletest//:gtest_main",
    ],
)

